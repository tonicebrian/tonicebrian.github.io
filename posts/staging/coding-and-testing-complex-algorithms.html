<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Toni Cebrián - Coding and Testing Complex Algorithms</title>
        <link rel="stylesheet" type="text/css" href="../../css/default.css" />
        <link rel="stylesheet" type="text/css" href="../../css/syntax.css" />
        <script type="text/javascript" src="../../js/ga.js"></script>
        
    </head>
    <body>
        <div id="header">
            <div id="logo">
                <a href="../../">Toni Cebrián</a>
            </div>
            <div id="navigation">
                <a href="../../">Home</a>
                <a href="../../about.html">About</a>
                <a href="../../feed/atom.xml">Feed</a>
                <a href="../../archive.html">Archive</a>
            </div>
        </div>

        <div id="content">
            <h1>Coding and Testing Complex Algorithms</h1>

            <div class="info">Posted on April  5, 2016</div>

<h1 id="handling-the-powerlet-selection">Handling the powerlet selection</h1>
<p>For finding the set of relevant powerlets in <span class="citation">@Elhamifar2015</span> they also add a smoothing term, but in <span class="citation">@Abassi2015</span> they state that for low resolution disaggregation that doesn’t make sense and they drop it. So the final formulation for finding relevant powerlets is:</p>
<p>[ tr(D^TZ) + ||Z||_{,1} \ s.t. 1<sup>TZ=1</sup>T,Z0 ]</p>
<p>where <span class="math inline">\(||Z||_{\infty,1} = \sum_{i=1}^N ||z_{i,\cdot}||_\infty\)</span> is aimed at counting the number of non-zero rows. The optimization is just a linear problem optimization with equality constraints that just enforce that variables are probabilities and include an sparsity term for favoring few powerlets.</p>
<p>Let’s start breaking down this formulation into something an solver can understand.</p>
<p>First <span class="math inline">\(\textrm{minimize}\; \gamma||Z||_{\infty,1}\)</span> is translated into:</p>
<p>[ <em>{i}^N ||z</em>{i,}||_]</p>
<p>that in turn is translated using slack variables into:</p>
<p>[ \begin{aligned} &amp;  &amp;&amp; <em>{i}^N t_i \ &amp;  &amp;&amp; -t_i z</em>{ij} t_i \ &amp;&amp;&amp; t_i 0 \end{aligned} ]</p>
<p><a href="https://en.wikipedia.org/wiki/Trace_(linear_algebra)#Trace_of_a_product">unrolling the <span class="math inline">\(tr()\)</span> operator</a> we get <span class="math inline">\(tr(D^TZ) = \sum_{i,j}^N d_{ij}z_{ij}\)</span> so when we put the problem together we have:</p>
<p>[ \begin{aligned} &amp;  &amp;&amp; <em>i^N<em>j^N d</em>{ij}z</em>{ij}+<em>i^N t_i \ &amp;  &amp;&amp; <em>j^N z</em>{ij} = 1 \ &amp;&amp;&amp; z</em>{ij} - t_i 0 \ &amp;&amp;&amp; z_{ij} 0 t_i 0 i,j N</p>
<p>\end{aligned} ]</p>
<h2 id="translating-the-mathematical-formulation-into-code">Translating the mathematical formulation into code</h2>
<p>Now we have the mathematical problem posed in a more digestible formulation for a computer program. Now it is time to translate that into the DSL or API that the library solving this problem is giving us. For the problem at hand we will use <a href="https://www.mosek.com/">MOSEK</a> in Python. MOSEK because it was used in all the papers and reports significantly performance over open source alternatives like <a href="https://www.gnu.org/software/glpk/">GPLK</a>, and Python because then we could interface easily with <a href="http://nilmtk.github.io/">NILMTK</a>.</p>
<p>Testing the implementation of a machine learning algorithm implementation is difficult because it is difficult to create assertions on the results. You have some numbers in and you get some numbers out and you don’t know for sure whether the misalignment between training and testing is because the algorithm or because you failed in the implementation. Here we are going to approach the problem step by step trying to learn how to test complex implementations and learning some tricks in the process.</p>
<h3 id="tests-to-implement">Tests to implement</h3>
<ol style="list-style-type: decimal">
<li>Formulation for <span class="math inline">\(tr(D^TZ)\)</span> must equal <span class="math inline">\(tr(ZD^T)\)</span> because of properties of <span class="math inline">\(tr()\)</span></li>
</ol>

        </div>
        <div id="footer">
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </div>
    </body>
</html>
